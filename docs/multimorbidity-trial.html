<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.433">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>CMOR - HRC Programme 2022–2027</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-sidebar floating nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a href="./index.html" class="navbar-brand navbar-brand-logo">
    <img src="./_images/cmor-logo.jpg" alt="" class="navbar-logo">
    </a>
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">Centre for Musculoskeletal Outcomes Research<br><i>University of Otago</i></span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link active" href="./index.html" rel="" target="" aria-current="page">
 <span class="menu-text"><em>Kāinga</em><br>Home</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-mahibrour-work" role="button" data-bs-toggle="dropdown" aria-expanded="false" rel="" target="">
 <span class="menu-text"><em>Mahi</em><br>Our work</span>
    </a>
    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="nav-menu-mahibrour-work">    
        <li>
    <a class="dropdown-item" href="./our-work.html" rel="" target="">
 <span class="dropdown-text">Overview</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./hrc-programme.html" rel="" target="">
 <span class="dropdown-text">HRC Programme 2022–2027</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./oarnet.html" rel="" target="">
 <span class="dropdown-text">Osteoarthritis Aotearoa Research Network</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="./publications.html" rel="" target="">
 <span class="menu-text"><em>Puka rangahau</em><br>Publications</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./events.html" rel="" target="">
 <span class="menu-text"><em>Kaupapa</em><br>Events</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./news.html" rel="" target="">
 <span class="menu-text"><em>Ngā Karere</em><br>News</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./our-people.html" rel="" target="">
 <span class="menu-text"><em>Ō mātou tāngata</em><br>Our people</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./teaching.html" rel="" target="">
 <span class="menu-text"><em>Whakaako</em><br>Teaching</span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item">HRC Programme 2022–2027</li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
      <a href="./index.html" class="sidebar-logo-link">
      <img src="./_images/cmor-logo.jpg" alt="" class="sidebar-logo py-0 d-lg-inline d-none">
      </a>
      </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
 <span class="menu-text"><b>CMOR</b></span>
  </li>
        <li class="sidebar-item">
 <span class="menu-text">University of Otago</span>
  </li>
        <li class="sidebar-item">
 <span class="menu-text"><i class="bi bi-geo-alt-fill"></i> Dunedin, New Zealand</span>
  </li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="https://www.otago.ac.nz/dsm-surgery/research/cmor/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><i class="bi bi-link-45deg"></i> Website</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="https://twitter.com/CMOR_Otago" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><i class="bi bi-twitter"></i> Twitter</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="https://github.com/uo-cmor" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><i class="bi bi-github"></i> GitHub</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#research-questions" id="toc-research-questions" class="nav-link active" data-scroll-target="#research-questions">Research questions</a></li>
  <li><a href="#background" id="toc-background" class="nav-link" data-scroll-target="#background">Background</a></li>
  <li><a href="#design-and-methods" id="toc-design-and-methods" class="nav-link" data-scroll-target="#design-and-methods">Design and methods</a></li>
  <li><a href="#research-team" id="toc-research-team" class="nav-link" data-scroll-target="#research-team">Research team</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">HRC Programme 2022–2027</h1>
<p class="subtitle lead">Project 3: He Oranga mō te whanau – Improving outcomes for people with hip and knee OA and co-morbidities</p>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<section id="research-questions" class="level3">
<h3 class="anchored" data-anchor-id="research-questions">Research questions</h3>
<p>Does a novel, culturally acceptable exercise therapy, dietary education, and self-management intervention, in addition to usual care, result in superior self-reported and objectively measured physical and physiological outcomes in people with multimorbidity, compared with usual care only? Is it cost-effective? What are the equity consequences? Project 3 will provide data to Proj. 1 &amp; 4.</p>
</section>
<section id="background" class="level3">
<h3 class="anchored" data-anchor-id="background">Background</h3>
<p>This project focuses on multimorbidity. Multimorbidity affects &gt;42% of Aotearoa peoples over age 45, with Māori and Pasifika disproportionately affected. Physical activity has positive effects on at least 26 LTCs including cardiovascular disease, T2D, COPD, depression and health outcomes in overweight and obesity, however the pain and disability of OA is a barrier to physical activity. Exercise therapy supported by patient education is effective in overcoming that barrier. The high prevalence of multimorbidity in Māori and Pacific patients requires the health system reorientate health-care delivery around multimorbidity, and deliver culturally safe lifestyle interventions. Multimorbidity in which OA is one condition is termed OA and comorbidity.</p>
<p>This project builds on the previous research of the investigator team. The unique contribution of this Aotearoa project is our focus on people with OA and comorbidity, and adapting interventions to the unique Aotearoa context.</p>
<p>PI Abbott’s group have conducted extensive stakeholder research on the preferences and priorities of a cross-section of stakeholders in the treatment of OA. We conducted focus groups with people with OA (n=11), Māori (n=5), policymakers (national &amp; local healthcare delivery) (n=7), healthcare providers (n=10), and OA experts (n=5). This revealed that presence of co-morbid conditions, attitudes and beliefs, culturally safe practices, social support factors, and accessibility were among the key themes important to stakeholders.</p>
<p>NI Skou’s team has to date completed a series of focus group interview projects, co-development of an intervention programme with people with multimorbidity and health care providers, a feasibility study (manuscripts in preparation), and a qualitative study nested within the programme feasibility trial aimed to investigate participants’ and health care providers experiences with the exercise and self-management intervention developed by NI Skou’s team, and assess intervention acceptability.</p>
<p>NI Coppell’s team have conducted a non-randomised 6-month comparative feasibility trial of a dietary-focussed weight loss programme in patients with prediabetes, with economic evaluation, in Hawke’s Bay funded by the MoH, Hawke’s Bay Medical Research Foundation and the NZ Society for the Study of Diabetes. The feasibility of implementing the novel nurse-delivered Prediabetes Intervention Package (PIP) within the primary care setting, in patients with recently diagnosed prediabetes, was shown, and intervention fidelity was shown to be very good. The study enrolled eight general practices in the Napier-Hastings region, recruiting 172 with prediabetes and overweight or obesity. Patient interviews (9 men and 10 women, comprising of 8 Māori, 2 Pacific and 9 non-Māori non-Pacific), indicated the intervention was very well received . A current HRC funded (16/344) follow-up study uses the same intervention but with additional follow-up support, providing valuable feasibility, process and implementation insights. The project also established feasibility of cost-effectiveness analysis from a health service perspective. Strong engagement with all intervention practice nurses was established.</p>
</section>
<section id="design-and-methods" class="level3">
<h3 class="anchored" data-anchor-id="design-and-methods">Design and methods</h3>
<p>This project will use a 4-phase approach: 1) co-refinement of intervention with ethnically diverse Aotearoa context; 2) pilot study; 3) randomised controlled trial with economic evaluation and process evaluation; and 4) implementation toolkit production. We will develop an exercise therapy and education program based on MOBILIZE and existing recommendations for exercise, diet, lifestyle change, and strategies to facilitate behavioural changes. The lifestyle education will incorporate the PIP in its entirety (i.e.&nbsp;1x 30 minute and 5x 15 minute dietary assessment and goal setting sessions) provided by a trained practice nurse experienced in the intervention (NI Tangiora), and guidelines-informed healthy lifestyle education and self-management sessions. The exercise therapy protocols, proven effective in the MOA Trial, include aerobic, strength, agility, and flexibility, will be provided by Māori physiotherapists. The exercise therapy has been specifically designed to use minimal equipment, be readily delivered in outpatient or primary care settings and transferable to home use. Strong interdisciplinary collaboration and a high degree of patient involvement throughout the entire research process are at the heart of the project to ensure relevance to patients and the health care system and to make sure that the project is implementable in clinical practice. A core design focus is to optimise the uptake of the programme within culturally diverse health care settings.</p>
<p>In Phase 1 we will co-develop, with an ethnically diverse sample of stakeholders, the content and format of the intervention building on the extensive development phases of the MOBILIZE, MOA and PIP studies. Using a qualitative and Mātauranga Māori approach, interviews will be conducted with patients and their whānau with OA and comorbidity, healthcare consumers and providers, to determine their preferences and expectations. In the event of COVID restrictions, we will either delay up to 6 months or recruit fully vaccinated.</p>
<p>In Phase 2 we will recruit and interview patients and whānau with multimorbidity meeting the inclusion/exclusion criteria (below) in a pilot study of all aspects of the full trial protocol below. Semi-structured interviews will explore the challenges and benefits of the programme, preferences for delivery, barriers and facilitators of access and adherence. Qualitative research will use culturally aligned approaches, sampling improved, not-improved, male, female, Māori, and non-Māori (n=30).</p>
<p>Phase 3 is a randomized trial with process evaluation and economic evaluation. The study hypothesis is that the personalized exercise therapy and lifestyle education program will result in superior HRQoL (primary), physical function, and cardiovascular risk factors (including glycated haemoglobin HbA1c), and will be cost-effective from health system and societal perspectives compared with usual care. Usual care is the ideal comparison for establishing incremental effects over status quo health delivery, and for evaluation of cost-effectiveness of implementation. All healthcare consumption in both groups is measured using the Otago Costs and Consequences Questionnaire.</p>
<p>Participants with OA and co-morbidity (i.e.&nbsp;multimorbidity) will be recruited through Health Hawkes Bay practices and Hastings Hospital orthopaedic outpatients and randomly assigned to either the supported exercise therapy and education programme or usual care</p>
<p>Inclusion criteria: adults aged 35-70 meeting the NICE clinical diagnostic criteria for OA and at least one of the following: T2D or prediabetes, heart disease (heart failure or coronary heart disease), hypertension, COPD, or depression. Having other comorbidities does not exclude participation. Exclusion criteria: Participation in supervised systematic exercise for one of their diseases within the last 3 months; Patients with: an unstable health condition or at risk of serious adverse events; with life expectancy of less than 12 months; with psychosis disorders, post-traumatic stress disorder, Obsessive Compulsive Disorder, attention deficit hyperactivity disorder, autism, anorexia nervosa/bulimia nervosa or with an illness related to substance or alcohol abuse; not independently mobile in the community, not willing or available to participate for the intervention duration; or unable to comprehend the recruitment or intervention processes.</p>
<p>Implementation will be conducted and reported in accordance with the Consolidated Framework for Implementation Research (CFIR) and He Pikinga Waiora Implementation Framework (HPWIF)153, 154. The process evaluation will comply with best-practice guidance using qualitative, quantitative and mixed-methods for analysis of outcome measures in which several NIs have expertise. The CFIR is a pragmatic structure for evaluating implementation research, that has been widely used to inform such evaluations including those similar to MOBILIZE. The HPWIF is a tool designed to improve the uptake of prevention and treatment programmes within culturally diverse health care settings, aimed at reducing health inequities and achieving health equity for Māori. The HPWIF is a 62-item tool that utilizes in-depth interviews and online surveys in the domains of cultural-centeredness, community engagement, systems thinking, and integrated knowledge translation to assess and inform successful future implementation. Mixed-methods framework analysis will be based in a Kaupapa Māori theoretical grounding.</p>
<p>To ensure the highest quality trial design, we have submitted our proposal to ANZMUSC peer-review for endorsement. We will register the trial on www.ANZCTR.org.au and publish full protocol details on https://OSF.io We will report the results using CONSORT (+ extensions) and CHEERS standards.</p>
<p>Phase 4: Should the trial results be positive; we will develop training and implementation resources and impact activities to support uptake at scale across other settings (an implementation toolkit). This proposal responds to Priorities 5 and 6 of the Academy of Medical Sciences priorities for multimorbidity (develop tools and deploy strategies).</p>
</section>
<section id="research-team" class="level3">
<h3 class="anchored" data-anchor-id="research-team">Research team</h3>
<p>Coppell, Abbott, Skou, Nicolson, Wilson, Bell (kairangahau Māori), Brooking (kairangahau Māori), Tangiora (kairangahau Māori), Wawatai-Aldrich (kairangahau Māori), Bennell.</p>
<p><strong>Key relationships:</strong> Health Hawkes Bay, Cape Physio Māori Physiotherapists Leah Tuhi, Blake Taylor, Judy Brown; Consumer Advisory Group, Māori Advisory Group (kairangahau Māori above, Cape Physio cultural liaison Brenda Wainohu, locally recruited Māori representatives).</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>